@inject IStringLocalizer<NeoN3ProjectMetadataDialog> L
@using InnFork.Server.UI.Pages.workspace.Common.User.Transactions
<MudDialog>
    <DialogContent>
        <MudCard>
            <MudCardHeader>
                <MudStack Row="true" AlignItems="AlignItems.Center">
                    <MudIcon Icon="@Icons.Material.Rounded.Info" Color="Color.Primary" Size="Size.Large" />
                    <MudText Typo="Typo.h5" Color="Color.Primary" Class="ml-2">@L["Project Metadata"]</MudText>
                </MudStack>
            </MudCardHeader>
            <MudCardContent>
                <MudTabs Elevation="2" Rounded="true" Centered="true" PanelClass="pa-4">
                    <MudTabPanel Text="@L["Meta Data"]">
                        <MudGrid Spacing="3">
                            <MudItem xs="12" md="6">
                                <MudTextField Label="@L["Transaction ID"]" Variant="Variant.Outlined" ReadOnly="true"
                                              AdornmentIcon="@Icons.Material.Filled.Code" AdornmentColor="Color.Secondary"
                                              Value="@ProjectMetaData.TxId" Class="mb-4" />
                                <MudTextField Label="@L["Author Script Hash"]" ReadOnly="true" Lines="2"
                                              AdornmentIcon="@Icons.Material.Filled.Fingerprint"
                                              Value="@ProjectMetaData.AuthorAccount_ScriptHash" Class="mb-4" />
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField Label="@L["Public Key"]" ReadOnly="true" Variant="Variant.Outlined"
                                              AdornmentIcon="@Icons.Material.Filled.Key" Lines="3"
                                              Value="@ProjectMetaData.AuthorAccount_PublicKey" Class="mb-4" />
                                <MudPaper Elevation="2" Class="pa-4">
                                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary" Class="mb-2">Signatures</MudText>
                                    <MudTextField Label="@L["Project JSON Signature"]" ReadOnly="true" Lines="2"
                                                  AdornmentIcon="@Icons.Material.Filled.Verified" Variant="Variant.Text"
                                                  Value="@ProjectMetaData.AuthorAccount_Signature" />
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                    </MudTabPanel>
                    <MudTabPanel Text=@L["Project Package"]>
                        <MudGrid Spacing="3">
                            <MudItem xs="12" md="6">
                                <MudTextField Label="@L["Project Offer Hash"]" ReadOnly="true"
                                              AdornmentIcon="@Icons.Material.Filled.Tag"
                                              Value="@ProjectMetaData.neoN3_ProjectPackage.ProjectOfferId_Sha256" Class="mb-4" />
                                <MudTextField Label="@L["Project Hash ID"]" ReadOnly="true"
                                              AdornmentIcon="@Icons.Material.Filled.AddCard" Lines="2"
                                              Value="@ProjectMetaData.neoN3_ProjectPackage.ProjectSha256Id" Class="mb-4" />
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudPaper Elevation="1" Class="pa-3">
                                    <MudText Typo="Typo.caption" Color="Color.Tertiary" Class="mb-2">JSON Data</MudText>
                                    <MudTextField Label="@L["Project Offer JSON"]" ReadOnly="true" Lines="4"
                                                  Variant="Variant.Outlined"
                                                  Value="@ProjectMetaData.neoN3_ProjectPackage.ProjectOfferShortJson" />
                                    <MudTextField Label="@L["Project JSON"]" ReadOnly="true" Lines="4"
                                                  Variant="Variant.Outlined" Class="mt-3"
                                                  Value="@ProjectMetaData.neoN3_ProjectPackage.ProjectJson" />
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                    </MudTabPanel>
                    <MudTabPanel Text=@L["Transaction Details"]>
                        <TransactionsComponent TransactionId="@ProjectMetaData.TxId" />
                    </MudTabPanel>
                </MudTabs>
            </MudCardContent>
            <MudCardActions Class="justify-end">
                <MudButton Color="Color.Primary" Variant="Variant.Outlined" OnClick="() => MudDialog.Close()">@L["Close"]</MudButton>
            </MudCardActions>
        </MudCard>

    </DialogContent>
</MudDialog>














@code {
    [Parameter] public Project_NeoN3_MetaData ProjectMetaData { get; set; } = default!;

    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = default!;

    void Submit() => MudDialog.Close(DialogResult.Ok(true));
    void Cancel() => MudDialog.Cancel();
}













@* @using Neo
<MudDialog>
    <TitleContent>
        <PageTitle>Project Metadata Editor</PageTitle>
    </TitleContent>
    <DialogContent>
        <MudForm>
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField Label="@L["Transaction ID"]" Variant="Variant.Outlined"
                                  @bind-Value="metadata.TxId" Immediate="true"/>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField Label="@L["Project Id \ SHA256"]" Variant="Variant.Outlined" Lines="2"
                                  @bind-Value="metadata.neoN3_ProjectOfferPackage.ProjectSha256Id"/>
                </MudItem>

                <MudItem xs="12" sm="6">
                    <MudTextField Label="@L["Project Offer Id \ SHA256"]" Variant="Variant.Outlined" Lines="2"
                                  @bind-Value="metadata.neoN3_ProjectOfferPackage.ProjectOfferId_Sha256" />
                </MudItem>
                <MudItem xs="12">
                    <MudPaper Elevation="1" Class="pa-4">
                        <MudText Typo="Typo.subtitle2" Class="mb-2">Author Details</MudText>
                        <MudTextField Label="@L["Account Script Hash"]" Variant="Variant.Outlined"
                                      Value="@BitConverter.ToString(metadata.bytes_UInt160_AuthorAcountScriptHash)" ReadOnly/>
                        <MudTextField Label="@L["Signature"]" Variant="Variant.Outlined" Class="mt-2"
                                      Value="@($"64 bytes")" ReadOnly/>
                    </MudPaper>
                </MudItem>

                 <MudItem xs="12">
                    <MudTextField Label="@L["Project Offer JSON"]" Variant="Variant.Outlined" Lines="5" 
                                  @bind-Value="metadata.ShortProjectOfferJsonString" MaxLines="20"/>
                </MudItem>


                <MudItem xs="12">
                    <MudTextField Label="@L["Author Public Key"]" Variant="Variant.Outlined" Lines="2"
                                  @bind-Value="metadata.bytes_UInt160_AcountScriptHash_Signature_PublicKey" />
                </MudItem>

            </MudGrid>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="Submit">@L["Submit"]</MudButton>
        <MudButton Color="Color.Error" OnClick="Cancel">@L["Cancel"]</MudButton>
    </DialogActions>
</MudDialog>

@code {

    
    private Project_NeoN3_MetaData metadata = new();
    private bool agreement;
        [CascadingParameter] IMudDialogInstance MudDialog { get; set; }
    void Submit() => MudDialog.Close(DialogResult.Ok(true));
    void Cancel() => MudDialog.Cancel();
    
    public class Project_NeoN3_MetaData
    {
        public string TxId { get; set; } = string.Empty;
        public string ShortProjectOfferJsonString { get; set; } = string.Empty;
        public byte[] bytes_UInt160_AuthorAcountScriptHash = new byte[20];
        public byte[] bytes_UInt160_AuthorAcountScriptHash_Signature = new byte[64];
        public byte[] bytes_UInt160_AcountScriptHash_Signature_PublicKey = new byte[33];
        public NeoN3_ProjectPackage neoN3_ProjectOfferPackage = new();

        public class NeoN3_ProjectPackage
        {
            public string ProjectOfferId_Sha256 { get; set; } = string.Empty;
            public string ProjectOfferShortJson { get; set; } = string.Empty;
            public string ProjectSha256Id { get; set; } = string.Empty;
            public string ProjectJson { get; set; } = string.Empty;
            public UInt160 AuthorAccount = UInt160.Zero;
            public byte[] AuthorPubKey = new byte[33];
            public byte[] Signature = new byte[64];
        }
    }
} *@